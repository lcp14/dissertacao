rewrite framework logic activity regulation
